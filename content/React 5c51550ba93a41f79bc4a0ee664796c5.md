# React

- Styling
    
    ```jsx
    /*
    Bir style.css dosyasÄ± import edildiÄŸinde bÃ¼tÃ¼n projede geÃ§erli olur.
    Vue'da olduÄŸu gibi component bazlÄ± bir stil dosyasÄ± oluÅŸturmak iÃ§in stil dosyasÄ±nÄ±n
    adÄ±na
    App.module.css'te olduÄŸu gibi css'ten Ã¶nce "module" eklenmelidir.
    Ä°mport edilen dosyanÄ±n iÃ§indekiler bir obje olarak dÃ¶necektir. Ä°Ã§indeki stillendirmelere
    dot notation olarak ulaÅŸÄ±labilir.
    */
    import styles from "./App.module.css"
    
    <h1 className={styles.heading1}>Merhaba</h1>
    ```
    
    <aside>
    ğŸ’¡ Styled-component isimli pakete bakabilirsin. Tek tek obje ÅŸeklinde stil oluÅŸturmaya izin verir. Ve random isimli sÄ±nÄ±flar oluÅŸturur. AyrÄ±caa component basedâ€™dir.
    
    </aside>
    
    ```jsx
    /*
    Stillendirme ÅŸu ÅŸekilde yapÄ±lÄ±r:
    */
    <span style={{backgroundColor: 'yellow', color: 'red'}}>Hello world</span>
    ```
    
    <aside>
    ğŸ’¡ classNames isimli bir paket var conditional olarak classâ€™larÄ± vermemize olanak saÄŸlar
    
    </aside>
    
- Props
    
    ```jsx
    // an other component
    <customComponent variant="success" name="Said">
    
    function customComponent(props) {
    console.log(props) // {variant: 'success', name: 'Said'}
    }
    // alternative
    function customComponent({variant, name}) {
    }
    ```
    
    ```jsx
    // an other component
    <customComponent variant="success" name="Said">
    
    function customComponent({children) {
    // children, component iÃ§inde olan her ÅŸeydir. Bu children iÃ§inde de children olabilir.
    // ona da children.children diyerek ulaÅŸÄ±labilir.
    }
    ```
    
- Lifecycle
    
    ```jsx
    useEffect(() â‡’ {
    // dom mount edildiÄŸinde ve her update olduÄŸunda iÅŸlemler yapar
    })
    
    useEffect(() => {
    // dom mount edildiÄŸinde Ã§alÄ±ÅŸÄ±r
    return () => {
    // dom unmount edildiÄŸinde Ã§alÄ±ÅŸÄ±r
    // component mount edildiÄŸinde yapÄ±lan ayarlarÄ± burada sÄ±fÄ±rlamak gerekir.
    // aksi takdirde componentten sonra da yaÅŸamaya devam edebilir.
    // Ã¶zellikle async iÅŸlemler: EventListener gibi
    }
    }, [])
    
    useEffect(() => {
    // sadece count statesi update olduÄŸunda Ã§alÄ±ÅŸÄ±r
    }, [count])
    ```
    
- Memoization
    
    ```jsx
    import {memo} from "react
    function Item() {
    return <h1>merhaba</h1>
    }
    
    // dÃ¶ndÃ¼rÃ¼len component'i belleÄŸe alÄ±r. EÄŸer bellekte herhangi bir update iÅŸlemi olmazsa
    // yani Item, kullanÄ±lmazsa, parent componenti iÃ§inde Item tekrar render edilmez.
    // Bellekten kullanÄ±lÄ±r.
    export default memo(Item)
    ```
    
    useCallback: Bir fonksiyonu hafÄ±zaya alÄ±r. Fonksiyonun iÃ§inde tekrar hesaplanmasÄ± gereken bir deÄŸer yoksa fonksiyon tekrar render edilmez.
    
    useMemo: Bir deÄŸiÅŸkeni hafÄ±zaya alÄ±r. EÄŸer deÄŸiÅŸken iÃ§inde tekrar hesaplanmayÄ± gerektirecek baÅŸka bir deÄŸer yoksa tekrar render edilmez. Ancak deÄŸiÅŸkenin hangi deÄŸere baÄŸlÄ± olarak yani hangi deÄŸer deÄŸiÅŸince tekrardan hesaplanacaÄŸÄ± ikinci parametre olarak geÃ§irilir.0
    
    memo: Bir componenti, tekrardan hesaplanmayÄ± gerektirecek bir ÅŸeyi yoksa render etmez.
    
- UseRef - ForwardRef
    
    Elemana ref verip select yapmayÄ± saÄŸlar.
    
    ```jsx
    const inputRef = useRef()
    
    <input type="text" ref={inputRef}}>
    <button onClick=()=>{inputRef.current.focus()}>Focusla</button>
    console.log(inputRef.current) // elementi verir.
    ```
    
    ```jsx
    // baÅŸka componente ref geÃ§irmek iÃ§in forwardRef kullanÄ±lÄ±r
    const Input = forwardRef((props, ref) => {
    	return <input ref={ref} type="text"/>
    })
    
    const inputRef = useRef()
    
    <Input ref={inputRef}/>
    ```
    
- Form
    
    ```jsx
    const [name, setName] = useState('')
    const genders = [{key: 1, value: 'Erkek', key: 2, value: 'KadÄ±n'}]
    const [gender, setGender] = useState('')
    const [allowRules, setAllowRules] = setState(false)
    const [level, setLevel] = setState('')
    
    	<input type="text" value={name} onChange={e=>setName(e.target.value)}/>
    	<select value={gender} onChange={(e)=> setGender(e.target.value)}>
    	{genders.map(gender => (
    	<option value={gender.value} key={gender.key}>{gender.value}</option>
    ))}
    	</select>
    <input type="checkbox" checked={allowRules}>KurallarÄ± Kabul Ediyorum
    
    <input type="radio" checked={level}>
    ```
    
    ```jsx
    const [avatar, setAvatar] = useState(null)
    const [previewImage, setPreviewImage] = useState('')
    useEffect(()=> {
    if(avvatar) {
    	const fileReader = new fileReader()
    	fileReader.addEventListener('load', ()=> {
    		setPreviewImage(this.result)
    	})
    	fileReader.readAsDataURL(avatar)}
    })
    
    const sendImage = () => {
    	const formData = new FormData()
    	formData.append('avatar', avatar)
    	formData.append('name', name)
    	fetch('https://...', {
    		method: 'POST',
    		body: formData
    	})
    }
    
    <input type="file" onChange={(e) => setAvatar(e.target.files[0])}
    {previewImage && <img src={previewImage} alt=""/>}
    <button onClick={sendImage}>Resmi GÃ¶nder</button>
    ```
    
- Fetch API
    
    ```jsx
    // Component mount edildiÄŸinde istek atmak
    const [data, setData] = useState(null)
    useEffect(() => {
    	fetch("https://...")
    	.then(resp => setData(resp.json()))
    }, [])
    
    // post isteÄŸi
    function addPost() {
    
    const headers = new Headers()
    headers.append('Content-Type': 'application/json')
    headers.append('Authorization', 'bearer fs4f45gs5vds54v5vs5vs.')
    
    const formData = new FormData()
    formData.append("name", "said")
    formData.append("avatar", avatar) // avatar state varsay
    
    	fetch("https://...", {
    		method: 'POST',
    		body: data,
    		// body: formData // headers content tipi json olmamalÄ± Ã§Ã¼nkÃ¼ json gÃ¶ndermiyoruz
    		// headers,
    		headers: {
    			'Content-Type': 'application/json',
    			'Authorization': 'bearer 545'
    		}
    	})
    }
    ```
    
    <aside>
    ğŸ’¡ Ä°stekleri baÅŸka bir dosyada tutmak klasÃ¶r yapÄ±sÄ± iÃ§in iyi olacaktÄ±r. Ã–rneÄŸin services isimli bir klasÃ¶rde request adlÄ± bir dosyada axiosâ€™a benzer bir ÅŸekilde fetch ile custom bir fonksiyon oluÅŸturulabilir. AYrÄ±ca post, get, put,  patch gibi fonksiyonlar oluÅŸturup bu fonksiyonlar da request fonksiyonunu kullanabilir.
    hem Json hem formdata tipinde veri gÃ¶nderilebileceÄŸi iÃ§in type parametresi olur.
    
    </aside>
    
    ![Untitled](React%205c51550ba93a41f79bc4a0ee664796c5/Untitled.png)
    
    ![Untitled](React%205c51550ba93a41f79bc4a0ee664796c5/Untitled%201.png)
    
    ![Untitled](React%205c51550ba93a41f79bc4a0ee664796c5/Untitled%202.png)
    

- env
    
    <aside>
    ğŸ’¡ .env dosyalarÄ±nda her deÄŸiÅŸkenin baÅŸÄ±nda REACT_APP_ olmalÄ±dÄ±r.
    
    </aside>
    
- Routing
    
    <aside>
    ğŸ’¡ react-router-dom paketi kullanÄ±lmaktadÄ±r
    
    </aside>
    
    ```jsx
    // index.js
    import {BrowserRouter} from "react-router-dom"
    root.render(<BrowserRouter><App/></BrowserRouter>)
    ```
    
    ```jsx
    // App.js
    // Basit bir ÅŸekilde yol belirtme bÃ¶yle olur
    <Routes>
    	<Route path="/" element={<Home/>}>
    	<Route path="/blog" element={<Blog/>}>
    </Routes>
    ```
    
    ```jsx
    // link verir.
    // Navlink, kendisi aktif olan sayfaya aktif class'Ä± ekler. Yani eÄŸer navbarÄ±mÄ±zda
    // 'blog'a tÄ±klarsak blog navlink elementine 'active' class'Ä± eklenecek.
    <nav>
    	<NavLink to="/">Anasayfa</NavLink>
    	<NavLink to="blog" className={({isActive})=> isActive && 'aktif'}>Blog</NavLink>
    </nav>
    // navlink, bir metot saÄŸlar ve isActive diye bir parametre verir. EÄŸer bu true ise,
    // o navlinke tÄ±klanmÄ±ÅŸtÄ±r. Bunu kullanarak mesela aktif olduÄŸundaki class'Ä±n ismini
    // 'aktif' olarak deÄŸiÅŸtirebiliriz.
    ```
    
    ```jsx
    /* Sub route'lar iÃ§in home route bir layout sayfasÄ± olarka kullanÄ±lÄ±r. Ve home
    route'Ä±n componentinin iÃ§inde, <Outlet> componenti kullanÄ±lÄ±r. Bu component,
    subcomponentlerin yerini alÄ±r.
    Blog componentinin route'nda index=true oldu Ã§Ã¼nkÃ¼ path="/blog" olduÄŸunda
    BlogLayout deÄŸil de Blog componenti yÃ¼klenecek
    */
    
    <Routes>
    	<Route path="/" element={<Home/>}>
    	<Route path="/contact" element={<Blog/>}>
    	<Route path="/blog" element={<BlogLayout/>}>
    		<Route index={true} element={<Blog/>}></Route>
    		<Route path="categories" element={<Categories/>}></Route>
    		<Route path="post/:url" element={<Post/>}></Route>
    	</Route>
    </Routes>
    
    // BlogLayout.js
    import {Outlet} from "react-router-dom"
    export default function BlogLayout() {
    	return <Outlet/>
    }
    
    // index.js
    export default function Blog() {
    	return (
    		<>Blog sayfasÄ±</>
    	)
    }
    ```
    
    ```jsx
    // Component iÃ§inde useParams ile URL parametreleri(e.g: /:id) alÄ±nabilir.
    const {id} = useParams()
    ```
    
    ```jsx
    // 404 page
    <Routes>
    	<Route path="/" element={<Home/>}>
    	<Route path="/contact" element={<Blog/>}>
    	<Route path="/blog" element={<BlogLayout/>}>
    		<Route index={true} element={<Blog/>}></Route>
    		<Route path="categories" element={<Categories/>}></Route>
    		<Route path="post/:url" element={<Post/>}></Route>
    		<Route path="*" element={<Blog404/>}></Route>
    	</Route>
    	<Route path="*" element={<Page404/>}></Route>
    </Routes>
    ```
    
    ```jsx
    // Private Route
    import {PrivateRoute} from "./PrivateRoute"
    <Routes>
    	<Route path="/" element={<Home/>}>
    	<Route path="/contact" element={<Blog/>}>
    	<Route path="/blog" element={<BlogLayout/>}>
    		<Route index={true} element={<Blog/>}></Route>
    		<Route path="categories" element={<Categories/>}></Route>
    		<Route path="post/:url" element={<Post/>}></Route>
    		<Route path="*" element={<Blog404/>}></Route>
    	</Route>
    // artÄ±k profile componentine private route componentinden geÃ§ilebilirse gidilebilir
    	<Route path="/profile" element={<PrivateRoute><Profile/></PrivateRoute>}>
    	<Route path="*" element={<Page404/>}></Route>
    </Routes>
    
    // AuthContext.js
    
    // PrivateRoute
    import {Navigate, useLocation} from "react-router-dom"
    export const PrivateRoute = ({children}) => {
    	const {user} = useAuth()
    	// Navigate, baÅŸka bir sayfaya yÃ¶nlendirme yapar. State ile gideceÄŸi sayfaya
    	// bilgi gÃ¶ndermeyi saÄŸlar.
    	if(!user) return <Navigate to="/auth/login"/ state={{return_url: useLocation().pathname+useLocation().search}}>
    	return children
    }
    
    // login.js
    import {useLocation, useNavigate} from "react-router-dom"
    export default function Login() {
    	const navigate = useNavigate()
    	const {setUser} = useAuth()
    	// location objesi ile query string ve pathname de alÄ±nabilir.
    	const location = useLocation()
    	const loginHandle = () => {
    		setUser({username: 'saidtaylann', password: '123'})
    		navigate(location.state.return_url || '/')
    // navigate("/", {replace: true, state: '')
    	}
    }
    ```
    
    ### UseRoutes
    
    <aside>
    ğŸ’¡ Vuejsâ€™te olduÄŸu gibi routelar baÅŸka bir sayfada olabilir.
    
    </aside>
    
    ```jsx
    // routes.js
    const routes = [
    	{
    		path: '/',
    		element: <HomeLayout/>,
    		children: [
    			{
    				index: true,
    				name: 'Home',
    				element: <Home/>,
    				auth: true
    			},
    		]
    	}
    
    const authMap = routes.map(route => {
    	if(route?.auth) route.element = <PrivateRoute>{route.element}</PrivateRoute>
    	if(route?.admin) route.element = <AdminRoute>{route.element}</AdminRoute>
    	if(route?.children) route.children = authMap(route.children)
    	return route
    })
    
    export const authMap(routes)
    
    // App.js
    import {useRoutes} from "react-router-dom"
    import routes from "./routes"
    function App(){
    	return useRoutes(routes)
    }
    ```
    
    ```jsx
    useSearchParams ile query string'leri almayÄ± saÄŸlar.
    ```
    
- Context
    
    ```jsx
    // Ãœst componentlerden alt componentlere direkt olarak veri aktarmayÄ± saÄŸlar
    
    // AuthContext.js
    import {createContext, useState} from "react"
    const Context = createContext()
    const AuthProvider = ({children}) => {
    	const [user, setUser] = useState()
    const data = {user, setUser}
    
    return (
    		<Context.Provider value={data}>
    			{children}
    		</Context.Provider>
    	)
    }
    
    export const UseAuth = () => useContext(Context)
    
    // main.js
    root.render(<BrowserRouter>
    	<AuthProvider><App/></AuthProvider>
    </BrowserRouter>)
    
    // login.js
    const {user} = useAuth()
    ```
    
- SEO
    
    <aside>
    ğŸ’¡ React Helmet paketi kullanÄ±labilir.
    
    </aside>
    
    ```jsx
    import {Helmet} from "react-helmet"
    
    function BlogPage() {
    	return (
    		<>
    			<Helmet>
    				<title>Bu componentin baÅŸlÄ±ÄŸÄ±</title> 
    			</Helmet>
    			<Blog/>
    		</>
    	)
    }
    
    ```
    
- Ek Bilgi
    
    ```jsx
    // File input olmadan programatic olarak file dialog aÃ§mak
    
    try {
    	const [fileHandle] = await window.showOpenFilePicker()
    	const file = await fileHandle.getFile()
    }
    catch(e) {
    	console.log("hataa")
    }
    ```
    
- Redux
    
    <aside>
    ğŸ’¡ ArtÄ±k Redux yerine Redux Toolkit kullanÄ±lmasÄ± tavsiye edilmektedir. Bu, daha Ã§ok Vuex yerine Pinia kullanmak gibidir.
    
    </aside>
    
    ```bash
    npm install @reduxjs/toolkit react-redux
    ```
    
    ```jsx
    // store/todos.js
    import { createSlice } from '@reduxjs/toolkit'
    // her bir store parÃ§asÄ±na slice adÄ± verilir. Bu, counter store'u olacak.
    
    // Pinia ya da vuex'teki state gibi baÅŸlangÄ±Ã§ verisi
    const initialState = {
      todos: [],
    }
    
    export const todo= createSlice({
      name: 'todo',
      initialState,
    	// reducer'ler aynÄ± mutations gibi metotlar ile iÅŸlemler yapar. Getter diye
    	// bir ÅŸey yoktur. Direkt olarak state kullanÄ±lÄ±r. 
      reducers: {
        addTodo: (state, action) => {
          state.todos = [
    				action.payload,
    				...state.todos
    			]
        },
        deleteTodo: (state, {payload}) => {
          state.todos = state.todos.filter(t => t.id !== payload)
        },
    		// action parametresi, fonksiyon kullanÄ±ldÄ±ÄŸÄ±nda anlam ifade eder.
    		// action.payload, fonksiyon Ã§aÄŸrÄ±ldÄ±ÄŸÄ±nda gÃ¶nderilen verileri taÅŸÄ±r
      },
    })
    export const {addTodo, deleteTodo} = todos.actions
    export default todos.reducer
    
    // store.js
    import {configureStore} from "@reactjs/toolkit"
    import todos from "../store/counter.js"
    
    export const store = configureStore({
    	reducer: {
    		todos
    	}
    })
    
    // index.js
    import { store } from './app/store'
    import { Provider } from 'react-redux'
    
    ReactDOM.render(
      <Provider store={store}>
        <App />
      </Provider>,
      document.getElementById('root')
    )
    
    // todo.js
    import {useDispatch} from "react-redux"
    import {addTodo, deleteTodo} from "../store/todos.js"
    // useSelector, getter gibi state iÃ§indeki istediÄŸimiz veriyi almayÄ± saÄŸlar.
    const dispatch = useDispatch()
    const addTodoHandle = () => {
    	dispatch(addTodo({id: 2, value: 'Ã§Ã¶p at', done: false}))
    }
    const deleteTodoHandle = (id) => {
    	dispatch(deleteTodo(id))
    }
    
    // listTodo.js
    import {useSelector} from "react-redux"
    // buradaki state.todo, store.js'teki reducer ismidir.
    const todos = useSelector(state =>state.todo.todos)
    function TodoList() {
    	return (
    		<>
    			<ul>{todos.map(t=> (<li key={t.id}>t.value</li>))}</ul>
    		</>
    	)
    }
    ```
    
    ```
    Redux, componentler dÄ±ÅŸÄ±nda da kullanÄ±labilir. Ã–rneÄŸin Vue'da useRef'i baÅŸka js
    dosyalarÄ±nda kullanÄ±p baÅŸka dosyadan import etmek gibi
    
    Burada da her componentte useDispatch ve useSelector import edip yorulmak yerine
    bir tane js dosyasÄ±nda gerekli fonksiyonlarÄ± oluÅŸturup componente gÃ¶ndermek gibi
    
    Bu dediÄŸim pinia iÃ§inde geÃ§erli. Pinia'da da durup durup store'u import etme.
    Bir composable dosyasÄ±nda hepsini hallet ve bir kerede import et.
    ```
    
    ```java
    // ../composable/todos.js
    import {useDispatch, useSelector} from "react-redux"
    import {addTodo, deleteTodo} from "../store/todos"
    
    const dispatch = useDispatch()
    const {todos} = useSelector(state => state.todo)
    
    export const addTodoHandle = (payload) => {dispatch(addTodo({id: 3, value: 'ekmek al', done: false}))}
    export const deleteTodoHandle = id => {dispatch(deleteTodo(2))}
    
    // todo.js
    import {addTodoHandle, deleteTodoHandle} from "../composables/todos.js"
    
    ```
    
- Firebase